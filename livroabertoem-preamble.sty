\RequirePackage{float}
\RequirePackage{ragged2e}
\RequirePackage{standalone}
\RequirePackage[brazilian]{babel}

\RequirePackage[
	style = apa,
	backend = biber
]{biblatex}

\renewbibmacro*{cite:plabelyear+extradate}{%
	\iffieldundef{labelyear}{}
	{\clearfield{labelmonth}% don't want months in citations
		\clearfield{labelday}% don't want days in citations
		\clearfield{labelendmonth}% don't want months in citations
		\clearfield{labelendday}% don't want days in citations
		\iffieldsequal{labelyear}{labelendyear}% Don't want no-op year ranges
		{\clearfield{labelendyear}}
		{}%
		\iffieldundef{origyear}
		{}
		{\printorigdate%
			\setunit*{\addslash}}%
		\iffieldundef{related}
		{}
		{\iffieldequalstr{relatedtype}{reprintfrom}
			{\entrydata*{\thefield{related}}{\printlabeldateextra}%
				\setunit*{\addslash}}
			{}}%
		\printlabeldateextra}}

\renewbibmacro*{cite}{%
	\iffieldequals{fullhash}{\cbx@lasthash}
	{\setunit{\compcitedelim}%
		\printtext[bibhyperref]{%
			\usebibmacro{cite:plabelyear+extradate}}}%
	{\printtext[bibhyperref]{%
			\ifnameundef{labelname}
			{\usebibmacro{cite:noname}%
				\setunit{\printdelim{nameyeardelim}}%
				\usebibmacro{cite:plabelyear+extradate}%
				\savefield{fullhash}{\cbx@lasthash}}
			{\ifnameundef{shortauthor}
				{\printnames{labelname}}%
				{\cbx@apa@ifnamesaved
					{\printnames{shortauthor}}
					{\ifnameundef{groupauthor}
						{\printnames[labelname]{author}}
						{\printnames[labelname]{groupauthor}}%
						\addspace\printnames[sabrackets]{shortauthor}}}%
				\setunit{\printdelim{nameyeardelim}}%
				\usebibmacro{cite:plabelyear+extradate}%
				\savefield{fullhash}{\cbx@lasthash}}}}%
	\setunit{\multicitedelim}}

\renewbibmacro*{textcite}{%
	\iffieldequals{fullhash}{\cbx@lasthash}
	{\setunit{\compcitedelim}%
		\printtext[bibhyperref]{%
			\usebibmacro{cite:plabelyear+extradate}}}
	{%
		\ifbool{cbx:parens}
		{\bibcloseparen\global\boolfalse{cbx:parens}}
		{}%
		\setunit{\compcitedelim}%
		\ifnameundef{labelname}
		{\iffieldundef{shorthand}%
			{\printtext[bibhyperref]{%
					\usebibmacro{cite:noname}}%
				\setunit{\ifbool{cbx:np}%
					{\printdelim{nameyeardelim}}%
					{\global\booltrue{cbx:parens}\addspace\bibopenparen}}%
				\printtext[bibhyperref]{%
					\usebibmacro{cite:plabelyear+extradate}}}
			{\printtext[bibhyperref]{%
					\usebibmacro{cite:shorthand}}}}
		{\printtext[bibhyperref]{%
				\ifnameundef{shortauthor}%
				{\printnames{labelname}}
				{\cbx@apa@ifnamesaved
					{\printnames{shortauthor}}
					{\ifnameundef{groupauthor}
						{\printnames[labelname]{author}}
						{\printnames[labelname]{groupauthor}}}}}%
			\setunit{\ifbool{cbx:np}
				{\printdelim{nameyeardelim}}
				{\global\booltrue{cbx:parens}\addspace\bibopenparen}}%
			\printtext[bibhyperref]{%
				\ifnameundef{shortauthor}
				{}
				{\cbx@apa@ifnamesaved
					{}
					{\printnames{shortauthor}\setunit{\printdelim{nameyeardelim}}}}%
				\usebibmacro{cite:plabelyear+extradate}}%
			\savefield{fullhash}{\cbx@lasthash}}}}


\input{definitions/la-math.tex}


\numberwithin{figure}{chapter}

\RequirePackage{cleveref}
\crefformat{task}{#2atividade~#1#3}
\Crefformat{task}{#2Atividade~#1#3}

\crefrangeformat{task}{#3atividades~#1#4 a~#5#2#6}
\Crefrangeformat{task}{#3Atividades~#1#4 a~#5#2#6}

\crefmultiformat{task}{#2atividades~#1#3}%
  { e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
\Crefmultiformat{task}{#2Atividades~#1#3}%
  { e~#2#1#3}{, #2#1#3}{ e~#2#1#3}

\crefrangemultiformat{task}{#3atividades~#1#4 a~#5#2#6}%
  { e~#3#1#4 a~#5#2#6}{, #3#1#4 a~#5#2#6}{ e~#3#1#4 a~#5#2#6}
\crefrangemultiformat{task}{#3Atividades~#1#4 a~#5#2#6}%
  { e~#3#1#4 a~#5#2#6}{, #3#1#4 a~#5#2#6}{ e~#3#1#4 a~#5#2#6}

\crefformat{example}{#2exemplo~#1#3}
\Crefformat{example}{#2Exemplo~#1#3}

\crefrangeformat{example}{#3exemplos~#1#4 a~#5#2#6}
\Crefrangeformat{example}{#3Exemplos~#1#4 a~#5#2#6}

\crefmultiformat{example}{#2exemplos~#1#3}%
  { e~#2#1#3}{, #2#1#3}{ e~#2#1#3}
\Crefmultiformat{example}{#2Exemplos~#1#3}%
  { e~#2#1#3}{, #2#1#3}{ e~#2#1#3}

\crefrangemultiformat{example}{#3exemplos~#1#4 a~#5#2#6}%
  { e~#3#1#4 a~#5#2#6}{, #3#1#4 a~#5#2#6}{ e~#3#1#4 a~#5#2#6}
\crefrangemultiformat{example}{#3Exemplos~#1#4 a~#5#2#6}%
  { e~#3#1#4 a~#5#2#6}{, #3#1#4 a~#5#2#6}{ e~#3#1#4 a~#5#2#6}
